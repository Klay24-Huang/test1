(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{423:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return f}));var o=r(425),n=r(2),c=Object(n.g)("v-card__actions"),l=Object(n.g)("v-card__subtitle"),d=Object(n.g)("v-card__text"),f=Object(n.g)("v-card__title");o.a},448:function(e,t,r){var content=r(477);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("02b064da",content,!0,{sourceMap:!1})},476:function(e,t,r){"use strict";var o=r(448);r.n(o).a},477:function(e,t,r){(t=r(15)(!1)).push([e.i,".cursor:hover{cursor:pointer}.btn,.google-btn{outline:solid;outline-width:thin}",""]),e.exports=t},507:function(e,t,r){"use strict";r.r(t);r(39),r(283),r(6),r(18),r(48),r(24);var o=r(34),n=(r(72),r(25)),c=r(7),l=r(20),d=r(26),f=r(23),w=r(12),h=r(5),v=r(29),m=r(3),x=r(30),k=r.n(x),_=r(38),A=r(212);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Object(w.a)(e);if(t){var n=Object(w.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(f.a)(this,r)}}var M=function(e,t,r,desc){var o,n=arguments.length,c=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(n<3?o(c):n>3?o(t,r,c):o(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c};v.d.use(A.a);var P=function(e){Object(d.a)(h,e);var t,r,f,w=I(h);function h(){var e;return Object(c.a)(this,h),(e=w.apply(this,arguments)).store=Object(m.e)(e.$store),e.newAccount=!1,e.newAccountInfo={name:"",email:"",password:"",confirmPassword:"",confirmPasswordError:""},e.login={email:"",password:""},e.googleLoginUrl=e.store.main.account.googleLoginUrl,e.rules={login:{email:[],password:[]}},e.error={login:{email:!1,password:!1},create:{name:!1,email:!1,password:!1,confirmPassword:!1}},e.errorMsg={login:{email:"",password:""},create:{name:"",email:"",password:"",confirmPassword:""}},e.ruleMethods={required:function(e){return!!e||"Required."}},e}return Object(l.a)(h,[{key:"mounted",value:function(){var e=this.$route.query.code;"string"==typeof e&&this.googleLogin(e)}},{key:"signInSwitch",value:function(){this.newAccount=!this.newAccount,window.scrollTo(0,0)}},{key:"originalLogin",value:(f=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.checkError("login")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.store.main.account.axiosOriginalLogin(this.login);case 4:if("login"!==(t=e.sent).message){e.next=8;break}return this.afterLogin(t.token,t._id),e.abrupt("return");case 8:alert(t.message);case 9:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"checkError",value:function(e){switch(e){case"login":0===this.login.email.length&&(this.errorMsg.login.email="Requied",this.error.login.email=!0),0===this.login.password.length&&(this.errorMsg.login.password="Requied",this.error.login.password=!0);for(var t=0,r=Object.entries(this.error.login);t<r.length;t++){var n=Object(o.a)(r[t],2);n[0];if(n[1])return!0}break;case"create":0===this.newAccountInfo.name.length&&(this.errorMsg.create.name="Requied",this.error.create.name=!0),0===this.newAccountInfo.password.length&&(this.errorMsg.create.password="Requied",this.error.create.password=!0),0===this.newAccountInfo.confirmPassword.length&&(this.errorMsg.create.confirmPassword="Requied",this.error.create.confirmPassword=!0),this.newAccountInfo.password!==this.newAccountInfo.confirmPassword&&(this.errorMsg.create.confirmPassword="Passwords not match",this.errorMsg.create.password="Passwords not match",this.error.create.confirmPassword=!0),this.checkEmail(this.newAccountInfo.email)||(this.errorMsg.create.email="Email not correct",this.error.create.email=!0),0===this.newAccountInfo.email.length&&(this.errorMsg.create.email="Requied",this.error.create.email=!0),this.checkPassword(this.newAccountInfo.password)||(this.errorMsg.create.password="Incorrect password format");for(var c=0,l=Object.entries(this.error.create);c<l.length;c++){var d=Object(o.a)(l[c],2);d[0];if(d[1])return!0}}return!1}},{key:"checkPassword",value:function(e){return/^(?=.*\d)(?=.*[a-z])(?=.*[0-9]).{6,}$/.test(e)}},{key:"checkEmail",value:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"resetErrMsg",value:function(e){switch(e){case"login.email":if(this.login.email.length>0)return this.errorMsg.login.email="",void(this.error.login.email=!1);break;case"login.password":if(this.login.password.length>0)return this.errorMsg.login.password="",void(this.error.login.password=!1);break;case"create.name":if(this.newAccountInfo.name.length>0)return this.errorMsg.create.name="",void(this.error.create.name=!1);break;case"create.email":var t={message:this.errorMsg.create.email,length:this.newAccountInfo.email.length};if(t.length>0&&"Required"===t.message)return this.errorMsg.create.email="",void(this.error.create.email=!1);if(this.checkEmail(this.newAccountInfo.email))return this.errorMsg.create.email="",void(this.error.create.email=!1);break;case"create.password":var r={message:this.errorMsg.create.password,length:this.newAccountInfo.password.length};if(r.length>0&&"Required"===r.message)return this.errorMsg.create.password="",void(this.error.create.password=!1);if(this.checkPassword(this.newAccountInfo.password))return this.errorMsg.create.password="",void(this.error.create.password=!1);break;case"create.confirmPassword":var o=this.errorMsg.create.confirmPassword;if(this.newAccountInfo.confirmPassword.length>0&&"Required"===o)return this.errorMsg.create.confirmPassword="",void(this.error.create.confirmPassword=!1);this.newAccountInfo.password===this.newAccountInfo.confirmPassword&&(this.errorMsg.create.confirmPassword="",this.error.create.confirmPassword=!1)}}},{key:"createAccount",value:function(){var e=this;this.checkError("create")||(this.newAccountInfo.password===this.newAccountInfo.confirmPassword?k.a.post("".concat(_.url,"/api/account/"),{name:this.newAccountInfo.name,email:this.newAccountInfo.email,password:this.newAccountInfo.password}).then((function(t){e.newAccountInfo={name:"",email:"",password:"",confirmPassword:"",confirmPasswordError:""},e.signInSwitch(),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(e){console.error(e)})):this.newAccountInfo.confirmPasswordError="password error")}},{key:"afterLogin",value:function(e,t){this.store.main.account.setLoginAndToken(e),this.store.main.account.setId(t),this.store.main.cart.prods=[],this.dealWithCartCookie(),this.$router.push("/")}},{key:"dealWithCartCookie",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$cookies.get("cart"),r=t?JSON.parse(t):[],o=this.store.main.account._id,n={_id:o,cart:r},e.next=6,this.store.main.account.axiosSaveCartToDb(n);case 6:this.store.main.cart.axiosDbCart({_id:o,isLogin:!0}),this.$cookies.remove("cart");case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"googleLogin",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.store.main.account.axiosGoogleLogin({code:t});case 4:if("login"!==(r=e.sent).message){e.next=8;break}return this.afterLogin(r.token,r._id),e.abrupt("return");case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"confirmPasswordError",get:function(){return this.newAccountInfo.confirmPasswordError}}]),h}(v.d),y=P=M([Object(v.a)({head:function(){return{title:"Login"}}})],P),C=(r(476),r(44)),O=r(42),R=r.n(O),j=r(425),E=r(423),L=r(436),$=r(437),S=r(280),V=r(438),T=r(497),component=Object(C.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"marginOfTop"},[r("v-row",[r("v-col",{attrs:{cols:"6",offset:"3"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.newAccount,expression:"!newAccount"}]},[r("v-card",{staticClass:"pa-6",attrs:{elevation:"2"}},[r("v-card-title",[e._v("Sign-in")]),e._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{attrs:{cols:"3"}},[e._v("Email")]),e._v(" "),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{"error-messages":e.errorMsg.login.email,change:e.resetErrMsg("login.email")},model:{value:e.login.email,callback:function(t){e.$set(e.login,"email",t)},expression:"login.email"}})],1)],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{attrs:{cols:"3"}},[e._v("Password")]),e._v(" "),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{"error-messages":e.errorMsg.login.password,input:e.resetErrMsg("login.password"),type:"password"},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}})],1)],1)],1),e._v(" "),r("v-row",[r("v-col",{staticClass:"text-right",attrs:{offset:"6",cols:"6"}},[r("a",{attrs:{href:e.googleLoginUrl}},[r("div",{staticClass:"google-btn"},[r("MyButton",[r("div",{attrs:{slot:"text"},slot:"text"},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"2"}},[r("v-img",{staticStyle:{"margin-right":"8px"},attrs:{width:"20px",alt:"Google sign-in",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png"}})],1),e._v(" "),r("v-col",{attrs:{cols:"10"}},[e._v(" Login with Google ")])],1)],1)])],1)]),e._v(" "),r("a",{attrs:{href:"#"}},[r("div",{staticClass:"btn mt-4",on:{click:e.originalLogin}},[r("MyButton",[r("div",{staticClass:"text-center",attrs:{slot:"text"},slot:"text"},[e._v("Continue")])])],1)])])],1)],1)],1)],1),e._v(" "),r("v-row",[r("v-col",{staticClass:"d-flex align-center",attrs:{cols:"4"}},[r("div",{staticClass:"hr"})]),e._v(" "),r("v-col",{staticClass:"text-center",attrs:{cols:"4"}},[e._v("New to Bazzar?")]),e._v(" "),r("v-col",{staticClass:"d-flex align-center",attrs:{cols:"4"}},[r("div",{staticClass:"hr"})]),e._v(" "),r("v-col",{staticClass:"text-center",attrs:{cols:"6",offset:"3"},on:{click:e.signInSwitch}},[r("MyButton",{staticClass:"btn"},[r("div",{attrs:{slot:"text"},slot:"text"},[e._v("Create your account")])])],1)],1)],1),e._v(" "),r("v-card",{directives:[{name:"show",rawName:"v-show",value:e.newAccount,expression:"newAccount"}],staticClass:"pa-6",attrs:{elevation:"2"}},[r("v-card-title",[e._v("Create account")]),e._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{staticClass:"d-flex align-center",attrs:{cols:"3"}},[e._v("Your name")]),e._v(" "),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{input:e.resetErrMsg("create.name"),"error-messages":e.errorMsg.create.name},model:{value:e.newAccountInfo.name,callback:function(t){e.$set(e.newAccountInfo,"name",t)},expression:"newAccountInfo.name"}})],1)],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{staticClass:"d-flex align-center",attrs:{cols:"3"}},[e._v("Email")]),e._v(" "),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{input:e.resetErrMsg("create.email"),"error-messages":e.errorMsg.create.email},model:{value:e.newAccountInfo.email,callback:function(t){e.$set(e.newAccountInfo,"email",t)},expression:"newAccountInfo.email"}})],1)],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{staticClass:"d-flex align-center",attrs:{cols:"3"}},[e._v("Password")]),e._v(" "),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{input:e.resetErrMsg("create.password"),"error-messages":e.errorMsg.create.password,type:"password",placeholder:"At least six letters and contain one number"},model:{value:e.newAccountInfo.password,callback:function(t){e.$set(e.newAccountInfo,"password",t)},expression:"newAccountInfo.password"}})],1)],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-row",[r("v-col",{staticClass:"d-flex align-center",attrs:{cols:"3"}},[e._v("Re-enter Password")]),e._v(" "),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{input:e.resetErrMsg("create.confirmPassword"),"error-messages":e.errorMsg.create.confirmPassword,error:e.error.create.confirmPassword,type:"password"},model:{value:e.newAccountInfo.confirmPassword,callback:function(t){e.$set(e.newAccountInfo,"confirmPassword",t)},expression:"newAccountInfo.confirmPassword"}})],1)],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{offset:"6",cols:"6"},on:{click:e.createAccount}},[r("MyButton",{staticClass:"btn text-center"},[r("div",{attrs:{slot:"text"},slot:"text"},[e._v("Continue")])])],1)],1)],1)],1),e._v(" "),r("v-card-actions",[e._v("\n          Already have an account?\n          "),r("span",{staticClass:"ml-3 blue--text text--darken-2 cursor",on:{click:e.signInSwitch}},[e._v("Sign-in")])])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;R()(component,{MyButton:r(128).default}),R()(component,{VCard:j.a,VCardActions:E.a,VCardText:E.b,VCardTitle:E.c,VCol:L.a,VContainer:$.a,VImg:S.a,VRow:V.a,VTextField:T.a})}}]);